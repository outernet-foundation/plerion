{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Attach: api",
      "type": "debugpy",
      "request": "attach",
      "connect": { "host": "127.0.0.1", "port": 5678 },
      "justMyCode": false,
      "pathMappings": [
        { "localRoot": "${workspaceFolder}/services/api", "remoteRoot": "/app/services/api" },
        { "localRoot": "${workspaceFolder}/common",        "remoteRoot": "/app/common" }
      ]
    },
    {
      "name": "Attach: reconstruction-worker",
      "type": "debugpy",
      "request": "attach",
      "connect": { "host": "127.0.0.1", "port": "${input:pickReconPort}" },
      "justMyCode": false,
      "pathMappings": [
        { "localRoot": "${workspaceFolder}/services/reconstruction-worker", "remoteRoot": "/app/services/reconstruction-worker" },
        { "localRoot": "${workspaceFolder}/common",                         "remoteRoot": "/app/common" }
      ]
    },
    {
      "name": "Attach: features-worker",
      "type": "debugpy",
      "request": "attach",
      "connect": { "host": "127.0.0.1", "port": "${input:pickFeaturesPort}" },
      "justMyCode": false,
      "pathMappings": [
        { "localRoot": "${workspaceFolder}/services/features-worker", "remoteRoot": "/app/services/features-worker" },
        { "localRoot": "${workspaceFolder}/common",                   "remoteRoot": "/app/common" }
      ]
    }
  ],
  "inputs": [
    {
      "id": "pickReconPort",
      "type": "command",
      "command": "extension.commandvariable.pickStringRemember",
      "args": {
        "description": "Select reconstruction-worker container",
        "command": "${workspaceFolder}/.vscode/scripts/list_debug_targets.py reconstruction-worker"
      }
    },
    {
      "id": "pickFeaturesPort",
      "type": "command",
      "command": "extension.commandvariable.pickStringRemember",
      "args": {
        "description": "Select features-worker container",
        "command": "${workspaceFolder}/.vscode/scripts/list_debug_targets.py features-worker"
      }
    }
  ]
}
